<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Project Work Status</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css"
          integrity="sha512-GQGU0fMMi238uA+a/bdWJfpUGKUkBdgfFdgBm72SUQ6BeyWjoY/ton0tEjH+OSH9iP4Dfh+7HM0I9f5eR0L/4w=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <style>
        body {
            background-color: #1b1b1b !important;
            color: white;
            font-size: 16px;
        }

        li:not(.active) {
            color: gray;
        }

        .active::before {
            /*noinspection CssUnresolvedCustomProperty*/
            font: var(--fa-font-solid);
            content: "\f0a4";
            left: -30px;
            position: absolute;
            margin-top: 6px;
        }
    </style>
</head>
<body>
<div class="position-absolute top-50 start-50 translate-middle">
    <!--<table>
        <thead><tr><th>Project</th><th>Projected Work Week</th></tr></thead>
        <tbody>
        <tr>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
        </tr>
        </tbody>
    </table>-->
    <ul class="list-unstyled">
        <li id="sick">Sick/Bad Health/Swamped at work <small></small></li>
        <li id="td">Tempus Dominus <small></small></li>
        <li id="blog">Blog/Static site generator <small></small></li>
        <li id="sp">Private Project <small></small></li>
        <li id="proxy">Web Proxy tool <small></small></li>
    </ul>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css"
      integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg=="
      crossorigin="anonymous" referrerpolicy="no-referrer"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/fontawesome.min.css"
      integrity="sha512-KVdV5HNnN1f6YOANbRuNxyCnqyPICKUmQusEkyeRg4X0p8K1xCdbHs32aA7pWo6WqMZk0wAzl29cItZh8oBPYQ=="
      crossorigin="anonymous" referrerpolicy="no-referrer"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.11.0/dayjs.min.js"
        integrity="sha512-KTFpdbCb05CY4l242bLjyaPhoL9vAy4erP1Wkn7Rji0AG6jx6zzGtKkdHc7jUOYOVSmbMbTg728u260CA/Qugg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
    const projects = [
        {name: 'td', factor: 1},
        {name: 'blog', factor: 2},
        {name: 'sp', factor: 3},
        {name: 'proxy', factor: 4}
    ];

    const current = 'blog';

    document.getElementById(current).classList.add('active');

    if (current !== 'sick') {
        const tdStart = dayjs('2022-01-09');
        const sow = dayjs().startOf('w');
        console.log(sow.diff(tdStart, 'w'))
        const predict = sow.diff(tdStart, 'w')%4;
        /*
        predict should be used 4-predict = number of weeks till next td
        should be able to loop through projects and guess next work on date
        and if behind
         */
        const currentIndex = projects.findIndex(x => x.name === current);
        projects.forEach((project, index) => {
            if (project.name === current) return;
            const small = document.getElementById(project.name).getElementsByTagName('small')[0];
            
            const startDate = sow.add(predict + (index > currentIndex ? index : projects.length-2), 'w').format('YYYY-MM-DD');
            
            small.innerText = `${startDate}`;
        });
        
        let projectIndex = projects.findIndex(x => x.name === current) + 1;
        if (projectIndex >= projects.length) projectIndex = 1;
        const nextProject = projects[projectIndex];
        const nextWeek = dayjs().startOf('w').add(7, 'd');
        console.log(tdStart.diff(nextWeek, 'w'))
        console.log(nextProject)
    }
</script>
</body>
</html>